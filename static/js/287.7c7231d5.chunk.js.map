{"version":3,"file":"static/js/287.7c7231d5.chunk.js","mappings":"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","sources":["webpack://socialn/./src/components/Dialogs/Dialogs.module.sass?c081","webpack://socialn/./src/components/Dialogs/Contacts/Contacts.module.sass?5432","webpack://socialn/./src/components/Dialogs/Contacts/Contact/Contact.module.sass?5895","components/common/lastVisited/lastVisited.js","components/Dialogs/Contacts/Contact/Contact.jsx","components/Dialogs/Contacts/Contacts.jsx","webpack://socialn/./src/components/Dialogs/Chat/Chat.module.sass?baad","webpack://socialn/./src/components/Dialogs/Chat/Writer/Writer.module.sass?d908","components/Dialogs/Chat/Writer/Writer.jsx","webpack://socialn/./src/components/Dialogs/Chat/SendingMessage/SendingMessage.module.sass?1dd9","components/Dialogs/Chat/SendingMessage/SendingMessage.jsx","components/Dialogs/Chat/Chat.jsx","components/Dialogs/Dialogs.jsx","components/Dialogs/DialogsContainer.jsx","components/common/FormsControls/FormsControls.jsx","hoc/withAuthRedirect.js","utilities/validation.js","webpack://socialn/./src/components/common/FormsControls/FormsControls.module.sass?7f83"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Dialogs_wrapper__DeaPX\",\"chat\":\"Dialogs_chat__ZvZUT\"};","// extracted by mini-css-extract-plugin\nexport default {\"contactsBlock\":\"Contacts_contactsBlock__UoVP+\",\"contacts\":\"Contacts_contacts__oDeh0\",\"contactFormBlock\":\"Contacts_contactFormBlock__x5V7f\",\"contactForm\":\"Contacts_contactForm__0Lh7d\"};","// extracted by mini-css-extract-plugin\nexport default {\"ava\":\"Contact_ava__y+ZB-\",\"contact\":\"Contact_contact__PEb8e\",\"active\":\"Contact_active__WYlI6\",\"info\":\"Contact_info__mXtfS\"};","const lastVisited = (postDate) => {\r\n  let date = Date.parse(postDate)\r\n  let diff = new Date() - date;\r\n  if (diff < 1000) {\r\n    return 'прямо сейчас';\r\n  }\r\n  let sec = Math.floor(diff / 1000);\r\n  if (sec < 60) {\r\n    return sec + ' сек. назад';\r\n  }\r\n  let min = Math.floor(diff / 60000);\r\n  if (min < 60) {\r\n    return min + ' мин. назад';\r\n  }\r\n\r\n  let d = new Date(date);\r\n  d = [\r\n    '0' + d.getDate(),\r\n    '0' + (d.getMonth() + 1),\r\n    '' + d.getFullYear(),\r\n    '0' + d.getHours(),\r\n    '0' + d.getMinutes()\r\n  ].map(component => component.slice(-2));\r\n  return d.slice(0, 3).join('.') + ' ' + d.slice(3).join(':');\r\n}\r\n\r\nexport default lastVisited;","import React from 'react'\r\nimport s from './Contact.module.sass';\r\nimport UserIcon from \"../../../../assets/images/unknown.png\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport lastVisited from '../../../common/lastVisited/lastVisited.js'\r\n\r\nconst Contact = React.memo((props) => {\r\n  return (\r\n    <div className={s.contact}>\r\n      <NavLink to={'/dialogs/' + props.id} className={navData => navData.isActive ? s.active : s.link}>\r\n        <img src={props.ava != null ? props.ava : UserIcon} className={s.ava}></img>\r\n        <div className={s.info}>\r\n          <h2 className={s.nickName}>{props.nickName}</h2>\r\n          <p>{props.newMessagesCount > 0 ? ('Новых сообщений: ' + props.newMessagesCount) : ''}</p>\r\n          <p className={s.lastActivity}>Был(а) в сети: {lastVisited(props.lastActivity)}</p>\r\n        </div>\r\n      </NavLink>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Contact","import React from 'react'\r\nimport s from './Contacts.module.sass';\r\nimport Contact from './Contact/Contact';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Input } from '../../common/FormsControls/FormsControls';\r\nimport { required } from '../../../utilities/validation';\r\n\r\n\r\nconst Contacts = React.memo((props) => {\r\n  const onSubmit = (formData) => {\r\n    props.findPerson(formData.nameContact)\r\n  }\r\n\r\n  return (\r\n    <div className={s.contactsBlock}>\r\n      <div className={s.findFriend}>\r\n        <FindContactReduxForm onSubmit={onSubmit} />\r\n      </div>\r\n      <div className={s.contacts}>\r\n        {(props.user && props.user.userId != props.YourId) && <Contact key={props.user.id} nickName={props.user.fullName} id={props.user.userId} ava={props.user.photos.small} />}\r\n        {props.users.map(user => <Contact key={user.id} newMessagesCount={user.newMessagesCount} nickName={user.name ? user.name : user.userName} id={user.id} ava={user.photos.small} lastActivity={user.lastUserActivityDate} />)}\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nconst FindContactForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit} className={s.contactFormBlock}>\r\n      <Field name={\"nameContact\"} component={Input} type={\"text\"} placeholder={\"Имя пользователя\"} validate={[required]} />\r\n      <button className={s.contactBtn}>Найти</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst FindContactReduxForm = reduxForm({ form: 'FindPerson' })(FindContactForm)\r\n\r\n\r\nexport default Contacts","// extracted by mini-css-extract-plugin\nexport default {\"chat\":\"Chat_chat__CcF6+\",\"messages\":\"Chat_messages__i7JOP\",\"header\":\"Chat_header__yunV+\",\"dialogWith\":\"Chat_dialogWith__dkHJA\"};","// extracted by mini-css-extract-plugin\nexport default {\"you\":\"Writer_you__T2F8H\",\"me\":\"Writer_me__042Pz\",\"delView\":\"Writer_delView__-gGQ9\",\"message\":\"Writer_message__3qKcN\",\"ava\":\"Writer_ava__xLGVz\",\"deleteMsg\":\"Writer_deleteMsg__N4uF-\",\"viewed\":\"Writer_viewed__NqmGT\",\"unViewed\":\"Writer_unViewed__cldsU\"};","import s from './Writer.module.sass';\r\nimport UserIcon from \"../../../../assets/images/unknown.png\";\r\n\r\n\r\n\r\nconst Writer = (props) => {\r\n\r\n  const deleteMessage = () => {\r\n    props.deleteForMe(props.message.id)\r\n  }\r\n  const messageToSpam = () => {\r\n    props.messageToSpam(props.message.id)\r\n  }\r\n\r\n  return (\r\n    <div className={props.isMe ? s.me : s.you}>\r\n      <div className={s.message}>\r\n        <p>{props.message.body}</p>\r\n      </div>\r\n      <div className={s.delView}>\r\n        <span className={props.message.viewed ? s.viewed : s.unViewed}></span>\r\n        <button onClick={deleteMessage} className={s.deleteMsg}></button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Writer","// extracted by mini-css-extract-plugin\nexport default {\"sendingMessageForm\":\"SendingMessage_sendingMessageForm__WJFy5\",\"sendBtn\":\"SendingMessage_sendBtn__lbC3N\"};","import React from 'react';\r\nimport s from './SendingMessage.module.sass';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Textarea } from '../../../common/FormsControls/FormsControls';\r\nimport { maxLengthCreator } from '../../../../utilities/validation';\r\n\r\n\r\nconst maxLength300 = maxLengthCreator(50)\r\n\r\nconst SendingMessageForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit} className={s.sendingMessageForm}>\r\n      <Field name={props.nameForm} component={Textarea} type={\"text\"} placeholder={\"message\"}  />\r\n      <button className={s.sendBtn}></button>\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\nconst DialogReduxForm = reduxForm({ form: 'dialog' })(SendingMessageForm)\r\n\r\n\r\nconst SendingMessage = (props) => {\r\n  let nameForm = 'message'\r\n  const onSubmit = (formData) => {\r\n    props.sendMessage(props.chatWith.length > 0 && props.chatWith[0].id, formData.message)\r\n  }\r\n\r\n  return (\r\n    <DialogReduxForm onSubmit={onSubmit} chatWith={props.chatWith} nameForm={nameForm} />\r\n  )\r\n}\r\n\r\nexport default SendingMessage","import { useRef, useEffect } from 'react'\r\nimport React from 'react';\r\nimport s from './Chat.module.sass';\r\nimport Writer from './Writer/Writer';\r\nimport SendingMessage from './SendingMessage/SendingMessage'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nconst Chat = React.memo((props) => {\r\n\r\n  const messagesEndRef = useRef(null)\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n  }\r\n\r\n  useEffect(() => {\r\n    scrollToBottom()\r\n  }, [props.messageData]);\r\n\r\n  const message = props.messageData\r\n    .map(message => <Writer\r\n      key={message.id}\r\n      message={message}\r\n      isMe={message.senderId === props.YourId}\r\n      deleteForMe={props.deleteForMe}\r\n      chatWith={props.chatWith}\r\n      profile={props.profile}\r\n      messageToSpam={props.messageToSpam}\r\n    />)\r\n\r\n  const more = () => {\r\n    props.moreMessages(props.chatWith[0].id, props.currentPage + 1, 20, props.messageData)\r\n    props.SetCurrentPage(props.currentPage + 1)\r\n  }\r\n\r\n  const chatWithName = props.chatWith[0] && (props.chatWith[0].userName ? props.chatWith[0].userName : props.chatWith[0].name)\r\n\r\n  return (\r\n    <div className={s.chat}>\r\n      <NavLink to={'/profile/' + (props.chatWith[0] && props.chatWith[0].id)} className={s.dialogWith}>\r\n        <h2 className={s.header}>{chatWithName}</h2>\r\n      </NavLink>\r\n      <div className={s.messages}>\r\n        {props.currentPage < props.portionCount && <button onClick={() => { more() }} className={s.moreBtn}>Больше</button>}\r\n        {message}\r\n        <div ref={messagesEndRef}></div>\r\n      </div>\r\n      {props.users && <SendingMessage\r\n        sendMessage={props.sendMessage}\r\n        users={props.users}\r\n        chatWith={props.chatWith}\r\n        profile={props.profile}\r\n      />}\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Chat","import React from 'react'\r\nimport s from './Dialogs.module.sass';\r\nimport Contacts from './Contacts/Contacts';\r\nimport Chat from './Chat/Chat';\r\n\r\nconst Dialogs = React.memo((props) => {\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <h1>Чат</h1>\r\n      <div className={s.chat}>\r\n        <Contacts users={props.users} getProfile={props.getProfile} user={props.user} YourId={props.YourId} findPerson={props.findPerson} />\r\n        <Chat\r\n          messageData={props.messageData}\r\n          sendMessage={props.sendMessage}\r\n          chatWith={props.chatWith}\r\n          deleteForMe={props.deleteForMe}\r\n          YourId={props.YourId}\r\n          profile={props.profile}\r\n          listOfMessages={props.listOfMessages}\r\n          SetPageSize={props.SetPageSize}\r\n          currentPage={props.currentPage}\r\n          totalMessageCount={props.totalMessageCount}\r\n          pageSize={props.pageSize}\r\n          messageToSpam={props.messageToSpam}\r\n          users={props.users}\r\n          portionCount={props.portionCount}\r\n          SetCurrentPage={props.SetCurrentPage}\r\n          moreMessages={props.moreMessages}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Dialogs","import React, {useState} from \"react\";\r\nimport { connect } from \"react-redux\"\r\nimport { listOfMessages, sendMessage, deleteForMe, allDialogs, SetPageSize, messageToSpam, listOfNewMessages, SetCurrentPage, startChatting, moreMessages, findPerson } from '../../redux/dialogsReducer';\r\nimport { getProfile } from \"../../redux/profileReducer\";\r\nimport Dialogs from \"./Dialogs\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\n\r\nexport function withRouter(Children) {\r\n  return (props) => {\r\n    const match = { params: useParams() };\r\n    return <Children {...props} match={match} />\r\n  }\r\n}\r\n\r\n\r\n\r\nclass DialogsCont extends React.Component {\r\n  \r\n  startTheDialog() {\r\n    const userId = this.props.match.params.userId\r\n    if (userId != null) {\r\n      this.props.startChatting(userId, this.props.currentPage, this.props.pageSize)\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.getProfile(this.props.YourId)\r\n    this.props.listOfNewMessages()\r\n    this.props.allDialogs()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n      let isFriend = false\r\n      this.props.users.map(user => user.id == this.props.match.params.userId ? isFriend = true : null)\r\n      if(isFriend && this.props.profile.userId != this.props.YourId) {\r\n        this.props.getProfile(this.props.YourId)\r\n      }\r\n      this.startTheDialog()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (<>\r\n      <Dialogs\r\n        {...this.props}\r\n      />\r\n    </>)\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    chatWith: state.dialogsPage.chatWith,\r\n    users: state.dialogsPage.accounts,\r\n    messageData: state.dialogsPage.messages,\r\n    user: state.profilePage.profile,\r\n    YourId: state.auth.userId,\r\n    profile: state.profilePage.profile,\r\n    currentPage: state.dialogsPage.currentPage,\r\n    totalMessageCount: state.dialogsPage.totalMessageCount,\r\n    pageSize: state.dialogsPage.pageSize,\r\n    newMessages: state.dialogsPage.newMessages,\r\n    portionCount: state.dialogsPage.portionCount\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps,\r\n    {\r\n      listOfMessages, sendMessage,\r\n      deleteForMe, getProfile,\r\n      allDialogs, SetPageSize,\r\n      messageToSpam, listOfNewMessages,\r\n      SetCurrentPage, startChatting,\r\n      moreMessages, findPerson\r\n    }),\r\n  withRouter,\r\n  withAuthRedirect\r\n)(DialogsCont)","import React from \"react\";\r\nimport s from \"./FormsControls.module.sass\";\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\nexport const Textarea = ({ input, meta, ...props }) => {\r\n  const hasError = meta.touched && meta.error\r\n  return (\r\n    <div className={s.formControl + \" \" + (hasError ? s.error : \"\")}>\r\n      <div>\r\n        <textarea {...input} {...props} className={s.textarea} />\r\n      </div>\r\n      {hasError && <span className={s.someError}>{meta.error}</span>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const Input = ({ input, meta: {touched, error}, ...props }) => {\r\n  const hasError = touched && error\r\n  return (\r\n    <div className={s.formControl + \" \" + (hasError ? s.error : \"\")}>\r\n      <div>\r\n        <input {...input} {...props} className={s.input} />\r\n      </div>\r\n      {hasError && <span className={s.someError}>{error}</span>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const createForm = (name, component, type, placeholder=\"\", validators=[], props = {}) => {\r\n  return (<div className={`s.${name}`}>\r\n    <Field\r\n      name={name}\r\n      component={component}\r\n      type={type}\r\n      placeholder={placeholder}\r\n      validate={validators}\r\n      {...props}\r\n    />\r\n  </div>)\r\n}","import React from \"react\"\r\nimport { Navigate } from 'react-router-dom'\r\nimport { connect } from \"react-redux\"\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAuth: state.auth.isAuth\r\n  }\r\n}\r\n\r\nexport const withAuthRedirect = (Container) => {\r\n  class RedirectComponent extends React.Component{\r\n    render() {\r\n      if (!this.props.isAuth) return <Navigate to='/login' />\r\n\r\n      return <Container {...this.props} />\r\n    }    \r\n  }\r\n  let ConnectedRedirectComponent = connect(mapStateToProps)(RedirectComponent)\r\n\r\n  return ConnectedRedirectComponent\r\n}\r\n","export const required = value => {\r\n  if (value) return undefined;\r\n  return 'require error'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n  if (value.length > maxLength) return `max length ${maxLength} symbols!`;\r\n  return undefined\r\n}","// extracted by mini-css-extract-plugin\nexport default {\"formControl\":\"FormsControls_formControl__dV+OA\",\"error\":\"FormsControls_error__ZjcXj\",\"input\":\"FormsControls_input__kr6kc\",\"someError\":\"FormsControls_someError__PrG3Q\",\"commonError\":\"FormsControls_commonError__Rlpkm\",\"textarea\":\"FormsControls_textarea__xpgxZ\"};"],"names":["postDate","date","Date","parse","diff","sec","Math","floor","min","d","getDate","getMonth","getFullYear","getHours","getMinutes","map","component","slice","join","React","props","className","s","to","id","navData","isActive","src","ava","UserIcon","nickName","newMessagesCount","lastVisited","lastActivity","Contacts","FindContactReduxForm","onSubmit","formData","findPerson","nameContact","user","userId","YourId","fullName","photos","small","users","name","userName","lastUserActivityDate","reduxForm","form","handleSubmit","Field","Input","type","placeholder","validate","required","isMe","message","body","viewed","onClick","deleteForMe","DialogReduxForm","maxLengthCreator","nameForm","Textarea","sendMessage","chatWith","length","messagesEndRef","useRef","useEffect","current","scrollIntoView","behavior","scrollToBottom","messageData","senderId","profile","messageToSpam","chatWithName","currentPage","portionCount","moreMessages","SetCurrentPage","ref","getProfile","listOfMessages","SetPageSize","totalMessageCount","pageSize","withRouter","Children","match","params","useParams","DialogsCont","this","startChatting","listOfNewMessages","allDialogs","prevProps","prevState","snapshot","isFriend","startTheDialog","compose","connect","state","dialogsPage","accounts","messages","profilePage","auth","newMessages","withAuthRedirect","input","meta","hasError","touched","error","createForm","validators","mapStateToProps","isAuth","Container","RedirectComponent","value","maxLength"],"sourceRoot":""}